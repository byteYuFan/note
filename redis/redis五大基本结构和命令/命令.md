## 1.字符型

一个字符串类型键允许存储的数据的最大容量是512MB

### 命令

#### 1. 赋值与取值

```shell
SET KEY VALUE

GET KEY
```

```shell
127.0.0.1:6379> SET name hello
OK
127.0.0.1:6379> GET name
"hello"
127.0.0.1:6379> GET age
(nil)
```

#### 2. 递增递减数字

```shell
INCR key //自增key 1
INCRBY KEY INCREMENT //增加key为increment
如果没有key 默认为0

相反对key的操作为减
DECR KEY 
DECRBY KEY INCREMENT
```

```shell
127.0.0.1:6379> set age 18
OK
127.0.0.1:6379> get age
"18"
127.0.0.1:6379> INCR age
(integer) 19
127.0.0.1:6379> 
127.0.0.1:6379> INCRBY age 10
(integer) 29
127.0.0.1:6379> DECR age
(integer) 28
127.0.0.1:6379> DECRBY age 10
(integer) 18
127.0.0.1:6379> DECR key
(integer) -1
127.0.0.1:6379> DECRBY key 18
(integer) -19
127.0.0.1:6379> 

```

#### 3. 增加指定浮点数

```shell
INCREBYFLOAT KEY INCREMENT	
```

```shell	
127.0.0.1:6379> SET bar 1
OK
127.0.0.1:6379> INCRBYFLOAT bar 1.9
"2.9"
127.0.0.1:6379> get bar
"2.9"
127.0.0.1:6379> 
```

#### 4. 向尾部追加值

```shell
APPEND KEY VALUE
返回追加后整个字符串的长度
```

```shell
127.0.0.1:6379> GET name
"hello"
127.0.0.1:6379> append name " world"
(integer) 11
127.0.0.1:6379> GET name
"hello world"
```

#### 5. 获取字符串长度

```shell
STRLEN KEY
```

```shell
127.0.0.1:6379> STRLEN NAME
(integer) 0
127.0.0.1:6379> STRLEN name
(integer) 11
```

### 6. 同时获得/设置多个键值

```shell
MSET KEY VALUE [KEY VALUE ...]
MGET KEY [KEY ...]
```



```shell
127.0.0.1:6379> MSET age 18 price 19.6
OK
127.0.0.1:6379> MGET age price
1) "18"
2) "19.6"

```

#### 7. 位操作

```shell
GETBIT KEY offset
SETBIT key offset value
// setbit 命令可以设置 key 第offset 位置的bit位为value
BITCOUNT key [start] [end]
//统计key中bit位位1的个数 可选参数[start] [end] 指的是统计start-end 字节之间的值
BITOP operation destkey key [key]
（位运算 or and xor not）
```

```shell
127.0.0.1:6379> set foo bar
OK
127.0.0.1:6379> get foo
"bar"
127.0.0.1:6379> GETBIT foo 0
(integer) 0
127.0.0.1:6379> GETBIT foo 6
(integer) 1
127.0.0.1:6379> GETBIT foo 60000
(integer) 0
127.0.0.1:6379> SETBIT foo 6 0
(integer) 1
127.0.0.1:6379> SETBIT foo 7 1
(integer) 0
127.0.0.1:6379> get foo
"aar"
127.0.0.1:6379> BITCOUNT foo
(integer) 10
127.0.0.1:6379> BITCOUNT foo 0 1 
(integer) 6
127.0.0.1:6379> set foo1 bar
OK
127.0.0.1:6379> set foo2 aar
OK
127.0.0.1:6379> bitop or res foo1 foo2
(integer) 3
127.0.0.1:6379> get res
"car"
127.0.0.1:6379> 

```

## 2. 散列类型

不能嵌套 very important

散列类型的键值是一种字典结构，其存储了字段field和字段的映射，字段只能是字符串

### 命令

#### 1. 赋值与取值

```shell
HSET KEY field1 value1
HGET KEY field1
```

```shell
127.0.0.1:6379> HSET user:1 name yangchaoyue
(integer) 1
127.0.0.1:6379> HSET user:1 age 18
(integer) 1
127.0.0.1:6379> HSET user:1 sex women
(integer) 1
127.0.0.1:6379> HGET cuser:1 name age sex
(error) ERR wrong number of arguments for 'hget' command
127.0.0.1:6379> HGET cuser:1 name 
(nil)
127.0.0.1:6379> HGET user:1 name 
"yangchaoyue"
127.0.0.1:6379> HGET user:1 age
"18"
127.0.0.1:6379> HGET user:1 sex
"women"
```

```shell
HMSET KEY f1 v1 f2 v2 ...
HMGET KEY KEY f1 f2 f3 
HGETALL KEY 
```

```shell
127.0.0.1:6379> HMSET user:2 name lishizhen age 556 sex man
OK
127.0.0.1:6379> HMGET user:3 name age sex
1) (nil)
2) (nil)
3) (nil)
127.0.0.1:6379> HMGET user:2 name age sex
1) "lishizhen"
2) "556"
3) "man"
127.0.0.1:6379> HMGET user:1 name age sex
1) "yangchaoyue"
2) "18"
3) "women"
127.0.0.1:6379> 
127.0.0.1:6379> HGETALL user:1
1) "name"
2) "yangchaoyue"
3) "age"
4) "18"
5) "sex"
6) "women"
127.0.0.1:6379> HGETALL user:2
1) "name"
2) "lishizhen"
3) "age"
4) "556"
5) "sex"
6) "man"

```

#### 2. 判断字段是否存在

```shell
HEXISTS key filed 存在返回1 失败返回0
```

```shell
127.0.0.1:6379> HEXISTS user:1 name
(integer) 1
127.0.0.1:6379> HEXISTS user:1 height
(integer) 0
```

#### 3. 当字段不存在时赋值

```shell
HSETNX KEY f1 v1
当f1存在时不执行 不存在完成添加操作
```

#### 4. 只增加数字

```shell
HINCREBY KEY f1 increment
127.0.0.1:6379> HINCRBY user:2 age 10
(integer) 566
```

#### 5. 删除字段

```shell
HDEL KET f1 [f2]
```

```shell
127.0.0.1:6379> HDEL user:2 name age
(integer) 2
127.0.0.1:6379> hgetall user:2
1) "sex"
2) "man"
```

#### 6. 其他命令

```shell
1 只获取字段明
HKEYS key
127.0.0.1:6379> HKEYS user:1
1) "name"
2) "age"
3) "sex"
127.0.0.1:6379> HKEYS user:2
1) "sex"
2 只获取字段值
127.0.0.1:6379> HVALS user:1
1) "yangchaoyue"
2) "18"
3) "women"
127.0.0.1:6379> HVALS user:2
1) "man"
3 获得字段数量
HKEN KEY
127.0.0.1:6379> HLEN user:1
(integer) 3
127.0.0.1:6379> HLEN user:2
(integer) 1
127.0.0.1:6379> HLEN user:3
(integer) 0
```

## 3. 列表

列表类型可以存储一个有序的字符串列表，双向列表实现的

### 命令

#### 1. 向列表两端增加元素

```shel
LPUSH KEY v1 [...]
RPUSH KEY v1 [...]
返回增加元素后的列表长度
```

```shell
127.0.0.1:6379> HLEN user:1
(integer) 3
127.0.0.1:6379> HLEN user:2
(integer) 1
127.0.0.1:6379> HLEN user:3
(integer) 0
127.0.0.1:6379> LPUSH members 1
(integer) 1
127.0.0.1:6379> LPUSH members 2
(integer) 2
127.0.0.1:6379> LPUSH members 3
(integer) 3
127.0.0.1:6379> RPUSH members 4
(integer) 4
127.0.0.1:6379> RPUSH members 5
(integer) 5
127.0.0.1:6379> RPUSH members 6
(integer) 6
```

#### 2. 从列表两端弹出元素

```shell
LPOP key
RPOP key
返回移除元素的值

```

```shell
127.0.0.1:6379> LPOP members
"3"
127.0.0.1:6379> RPOP members
"6"
```

#### 3. 获取列表元素的个数

```shell
LLEN key 键不存在会返回0
```

```shell
127.0.0.1:6379> LLEN members
(integer) 4
127.0.0.1:6379> LLEN list
(integer) 0
```

#### 4. 获得列表片段

```shell
LRANGE KEY start stop 包括端点元素 0 -1 代表全部 
```

```shell
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "1"
3) "4"
4) "5"
127.0.0.1:6379> LRANGE members 0 2
1) "2"
2) "1"
3) "4"
127.0.0.1:6379> LRANGE members -2 -1
1) "4"
2) "5"
127.0.0.1:6379> LRANGE members 0 10
1) "2"
2) "1"
3) "4"
4) "5"
127.0.0.1:6379> LRANGE members -5 5
1) "2"
2) "1"
3) "4"
4) "5"

```

#### 5. 删除列表指定的值

```shell
LREM key count value 删除列表前count 个值为value的元素 返回实际删除元素的个数
count>0从左边开始删除
count<0从右边删除count绝对值个
count=0删除所有
```

```shell
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "2"
3) "2"
4) "1"
5) "4"
6) "5"
7) "5"
8) "5"
127.0.0.1:6379> LREM members 2 2
(integer) 2
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "1"
3) "4"
4) "5"
5) "5"
6) "5"
127.0.0.1:6379> LREM members -1 5
(integer) 1
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "1"
3) "4"
4) "5"
5) "5"
127.0.0.1:6379> LREM members 0 5
(integer) 2
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "1"
3) "4"

```

#### 6. 获得指定索引的元素值

```shell
LINDEX key index
LSET key index value
```

```shell
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "1"
3) "4"
127.0.0.1:6379> lindex members 2
"4"
127.0.0.1:6379> lset members 1 5
OK
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "5"
3) "4"
```

#### 7. 只保留指定片段

```shell
LTRIME key start end
```

```shell
127.0.0.1:6379> LPUSH members 5
(integer) 4
127.0.0.1:6379> LPUSH members 56
(integer) 5
127.0.0.1:6379> LTRIM members 2 5
OK
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "5"
3) "4"
```

#### 8. 向列表中插入元素

```shell
LINSERT key before|after pivot value
```

```shell
127.0.0.1:6379> LRANGE members 0 -1
1) "2"
2) "5"
3) "4"
127.0.0.1:6379> LINSERT members before 2 10
(integer) 4
127.0.0.1:6379> LRANGE members 0 -1
1) "10"
2) "2"
3) "5"
4) "4"
127.0.0.1:6379> LINSERT members after 2 19
(integer) 5
127.0.0.1:6379> LRANGE members 0 -1
1) "10"
2) "2"
3) "19"
4) "5"
5) "4"
```

#### 9. 将元素从一个列表转到另一个列表

```shell
RPOPLPUSH src dest (right pop and left push)
```

```shell
127.0.0.1:6379> LRANGE members 0 -1
1) "10"
2) "2"
3) "19"
4) "5"
5) "4"
127.0.0.1:6379> RPOPLPUSH members m1
"4"
127.0.0.1:6379> LRANGE m1 0 -1
1) "4"
127.0.0.1:6379> LRANGE members 0 -1
1) "10"
2) "2"
3) "19"
4) "5"
127.0.0.1:6379> RPOPLPUSH members m1
"5"
127.0.0.1:6379> RPOPLPUSH members m1
"19"
127.0.0.1:6379> LRANGE m1 0 -1
1) "19"
2) "5"
3) "4"
```

## 4. 集合类型

集合中每一个元素都是不同的

### 命令

#### 1. 增加/删除元素

```shell
SADD key number [...]
SREN key number [...]
```

```shell
127.0.0.1:6379> sadd ketters a b c d
(integer) 4
127.0.0.1:6379> sadd ketters a b e
(integer) 1
127.0.0.1:6379> SREM ketters a
(integer) 1
127.0.0.1:6379> SREM ketters a
(integer) 0

```

#### 2. 获取集合的所有元素

```shell
SMEMBERS KEY
```

```shell
127.0.0.1:6379> SMEMBERS ketters
1) "b"
2) "d"
3) "e"
4) "c"
```

#### 3. 判断元素是否在集合中

```shell
SISMEMBER key member
```

```shell
127.0.0.1:6379> SISMEMBER ketters b
(integer) 1
127.0.0.1:6379> SISMEMBER ketters a
(integer) 0
```

#### 4. 集合间的运算

```shell
SDIFF key [...] 差集
SINTER KEY [...]交集
SUNION KEY [...]并集
```

```shell
127.0.0.1:6379> SADD m1 1 2 3 4 5
(integer) 5
127.0.0.1:6379> SADD m2 2 3 4 5
(integer) 4
127.0.0.1:6379> SADD m3 1 5 6 8 9
(integer) 5
127.0.0.1:6379> SMEMBERS m1
1) "1"
2) "2"
3) "3"
4) "4"
5) "5"
127.0.0.1:6379> SMEMBERS m2
1) "2"
2) "3"
3) "4"
4) "5"
127.0.0.1:6379> SMEMBERS m3
1) "1"
2) "5"
3) "6"
4) "8"
5) "9"
127.0.0.1:6379> SDIFF m1 m2
1) "1"
127.0.0.1:6379> SINTER m1 m2
1) "2"
2) "3"
3) "4"
4) "5"
127.0.0.1:6379> SUNION m1 m3
1) "1"
2) "2"
3) "3"
4) "4"
5) "5"
6) "6"
7) "8"
8) "9"

```

#### 5. 获得集合中元素个数

```shell
SCARD KEY
```

```shell
127.0.0.1:6379> SCARD m1
(integer) 5
127.0.0.1:6379> SCARD m3
(integer) 5

```

#### 6. 存储集合之间的运算结果

```shell
SDIRFFSTORE dest key 
SINTERSTORE dest key 
SUNIONSTORE dest key
```

#### 7. 随机获得集合的元素

```	shell
SRANDMEMBERS key
```

#### 8. 从集合弹出一个元素

```shell
SPOP key
```

## 5. 有序集合类型

### 命令

#### 1. 增加元素

```shell
ZADD key socre member [...]
```

```shell
ZADD score 99 tom 87 peter 120 liming
```

#### 2. 获得元素的分数

```shell
ZSCORE key member 
```

```shell
127.0.0.1:6379> ZSCore score tom
"99"
127.0.0.1:6379> ZSCORE score liming
"120"
```

#### 3. 获得排名在某个范围内的元素列表

```shell
ZRANGE key start stop 
ZREVRANGE key start top 
```

```shell
127.0.0.1:6379> ZRANGE score 0 -1
1) "peter"
2) "tom"
3) "liming"
127.0.0.1:6379> ZRANGE score 0 -1 WITHSCORES
1) "peter"
2) "87"
3) "tom"
4) "99"
5) "liming"
6) "120"

```

#### 4. 获得指定分数范围的元素

```shell
ZRANGEBYSCORE key min max
```

```shell
127.0.0.1:6379> ZRANGEBYSCORE score 90 110
1) "tom"
```

#### 5. 增加某个元素的分数

```shell
ZINCREBY key increment member
```

```shell
127.0.0.1:6379> ZINCRBY score 10 tom
"109"
127.0.0.1:6379> ZSCORE score tom
"109"

```

#### 6. 获得集合元素的数量

```shell
ZCARD KEY
127.0.0.1:6379> ZCARD score
(integer) 3
```

#### 7. 获得指定分数范围内的元素个数

```shell
ZCOUNT key min max
```

#### 8. 删除一个或者多个元素

```shell
ZREN key member 返回删除的元素个数
```

#### 9. 按照排名删除元素

```shell
ZREMRANGEBYRANK KEY START STOP 
```

#### 10. 按照分数删除元素

```shell
ZREMRANGEBYSCORE key min max
```

#### 11. 获取元素排名

```shell	
ZRANK KEY MEMBER
```

